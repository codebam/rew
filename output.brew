
// entry "/home/makano/workspace/rew-rust/test/threads.coffee" 
// external "#std.threads"
rew.prototype.mod.prototype.defineNew("/home/makano/workspace/rew-rust/test/threads.coffee", function(globalThis){
with (globalThis) {
  var calculatorWorker;
rew.prototype.mod.prototype.find(module, "#std.threads")
using(namespace(rew.prototype.ns()))

print("Starting threads demo...")

print("\nCreating a Worker object...")

calculatorWorker = threads.prototype.create(function() {
  var total;
  total = 0
  
  return onmessage(function(data) {
    if (data.op === "add") {
      total += data.value
      return postMessage({ result: total })
    }
    else if (data.op === "subtract") {
      total -= data.value
      return postMessage({ result: total })
    }
    else if (data.op === "multiply") {
      total *= data.value
      return postMessage({ result: total })
    }
    else if (data.op === "divide") {
      total /= data.value
      return postMessage({ result: total })
    }
    else {
      return postMessage({ error: "Unknown operation" })
    }
  })
})

calculatorWorker.onmessage(function(event) {
  return print("Calculator result:", event.data)
})

calculatorWorker.postMessage({ op: "add", value: 5 })
calculatorWorker.postMessage({ op: "multiply", value: 10 })
calculatorWorker.postMessage({ op: "subtract", value: 15 })
calculatorWorker.postMessage({ op: "divide", value: 2 })


rew.prototype.channel.prototype.new(1000, function() {
  var activeThreads;
  activeThreads = threads.prototype.list()
  return print("Active threads:", activeThreads.length)
})

rew.prototype.channel.prototype.timeout(3000, function() {
  print("Terminating the calculator worker...")
  return calculatorWorker.terminate()
})

}
return globalThis.module.exports;
}, ["app://test.app/threads"]);
